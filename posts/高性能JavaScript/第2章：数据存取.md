# 第2章：数据存取 #

## 字面量 ##

字面量只代表自身，不存储在特定位置。

JS中的字面量：字符串`string`，数字`number`、布尔值`boolean`，对象`object`，数组`array`，函数`Function`，正则表达式`Regex`，`Null`和`undefined`。

## 管理作用域 ##

### 作用域链和标识符解析 ###

每个JS函数都表示为一个对象，是`Function`对象的一个实例。

Function的内部属性`Scope`包含了一个函数被创建的作用域中对象的集合。这个集合被称为函数的作用域链，它决定了哪些数据能被函数访问。函数作用域中的每个对象被称为一个可变对象，每个可变对象都以`键值对`的形式存在，当一个函数创建后，它的作用域链会被创建此函数的作用域中可访问的数据对象所填充。

执行函数时会创建一个称为**执行环境**的内部对象。一个执行环境定义了一个函数执行时的环境。函数每次执行时对应的执行环境都是独一无二的，所以多次调用同一个函数会导致创建多个执行环境。当函数执行完毕，执行环境就被销毁。

每个执行环境都有自己的作用域链，用于解析标识符。当执行环境被创建时，它的作用域链初始化为当前运行函数的`Scope`属性中的对象。这些值按照它们出现在函数中的顺序，被复制到执行环境的作用域中。这个过程一旦完成，**活动对象**的新对象就为执行环境创建好。

**活动对象**作为函数运行时的变量对象，包含了所有局部变量，命名参数，参数集合以及`this`。然后此对象被推入作用域链的最前端。当执行环境被销毁，活动对象也随之销毁。

## 标识符解析的性能 ##

全局变量总是处在执行环境作用域链的最末端，因为位置最远，所以搜索查找/读写速度最慢，性能消耗最大。

> 如果某个跨作用域的值在函数中被引用一次以上，那么就把它存储到局部变量里。
> `document`对象是全局对象，在使用它的时候，先将全局变量的引用存储在一个局部变量中，然后使用这个局部变量代替全局变量，这样可以提升性能。

## 改变作用域链 ##

有两个语句可以在执行时临时改变作用域链，一个是`with`，另一个是`catch`。

with语句用来给对象的所有属性创建一个变量。通过把`document`对象传递给`with`语句，一个包含了`document`对象所有属性的新的可变变量被置于作用域链的头部。**最好避免使用`with`语句。**

`try-catch`语句中的`catch`子句也具有同样效果。当`try`代码块中发生错误，执行过程会自动跳转到`catch`子句，然后把异常对象推入一个变量对象并置于作用域的首尾
